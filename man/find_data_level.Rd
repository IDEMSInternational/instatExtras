% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/find_data_level.R
\name{find_data_level}
\alias{find_data_level}
\title{Detect the Data Level of a Dataset}
\usage{
find_data_level(
  data,
  id_cols = c("id", "participant_id", "participant_name", "ID"),
  variety_cols = c("variety", "varieties", "item", "items", "Genotype", "genotype"),
  trait_cols = c("trait", "traits"),
  positive_trait_suffixes = c("_pos", "_best"),
  negative_trait_suffixes = c("_neg", "_worst")
)
}
\arguments{
\item{data}{A data frame to inspect.}

\item{id_cols}{Character vector of possible names for ID columns.}

\item{variety_cols}{Character vector of possible names for variety columns.}

\item{trait_cols}{Character vector of possible names for trait columns.}

\item{positive_trait_suffixes}{Character vector of suffixes used for positive trait rankings (e.g., \code{"_pos"}, \code{"_best"}) for ID-level data only.}

\item{negative_trait_suffixes}{Character vector of suffixes used for negative trait rankings (e.g., \code{"_neg"}, \code{"_worst"}) for ID-level data only.}
}
\value{
A named list with the following elements:
\describe{
\item{level}{The detected level of the dataset, such as \code{"id"}, \code{"plot"}, \code{"plot-trait"}, etc.}
\item{id_col}{The name of the column identified as the ID column (if found).}
\item{variety_col}{The name of the variety column (if found).}
\item{trait_col}{The name of the trait column (if found).}
\item{varieties_cols}{An integer (0 or 1) indicating whether any columns appear to be variety-specific based on suffixes, used only when the data has just an ID column.}
}
}
\description{
Identifies the structure or "level" of a dataset based on common marker columns such as ID, variety, and trait.
Returns the most granular level at which rows are uniquely identified, along with the detected column names.
}
\examples{
df <- data.frame(ID = 1:3, item = letters[1:3], trait = rep("height", 3))
find_data_level(df)

df <- data.frame(ID = c(1:3, 1:3), variety = c(1,1,1,3,3,3))
find_data_level(df)

df <- data.frame(id = 1:3, yield_pos = c(1, 2, 3))  # variety inferred from suffix
find_data_level(df)

}
